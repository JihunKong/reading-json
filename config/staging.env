# Korean Reading Comprehension System - Staging Environment Configuration
# This file contains staging-specific environment variables

# Application Environment
ENVIRONMENT=staging
DEBUG=false
FLASK_ENV=production
RELOAD=false
BUILD_TARGET=production

# Security Configuration (Less strict than production)
SECURE_COOKIES=true
HTTPS_ONLY=false
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
SESSION_SECURE=false
CSRF_PROTECTION=true

# Database Configuration - Staging
DB_NAME=reading_db_staging
DB_USER=reading_user
# DB_PASSWORD should be set as environment variable
DB_HOST=postgres
DB_PORT=5432
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis Configuration - Staging
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD should be set as environment variable
REDIS_DB=0
REDIS_POOL_MAX_CONNECTIONS=20
REDIS_SOCKET_KEEPALIVE=true
REDIS_HEALTH_CHECK_INTERVAL=30

# RabbitMQ Configuration - Staging
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
# RABBITMQ_USER and RABBITMQ_PASSWORD should be set as environment variables
RABBITMQ_VHOST=/
RABBITMQ_HEARTBEAT=600
RABBITMQ_CONNECTION_ATTEMPTS=3

# Performance Settings (Scaled down for staging)
MAX_WORKERS=4
WORKER_TIMEOUT=120
WORKER_CONNECTIONS=500
CONNECTION_POOL_SIZE=20
CACHE_TTL_SECONDS=3600
ASYNC_POOL_SIZE=5

# Logging Configuration (More verbose for testing)
LOG_LEVEL=DEBUG
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/app.log
LOG_MAX_SIZE=50MB
LOG_BACKUP_COUNT=3
SYSLOG_ENABLED=false

# Monitoring Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_EXPORT_INTERVAL=60
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=10

# File Storage - Staging
UPLOAD_MAX_SIZE_MB=10
CONTENT_OUTPUT_DIR=/data/content
REPORT_OUTPUT_DIR=/data/reports
BACKUP_DIR=/data/backups
STATIC_FILE_CACHE_TTL=3600

# CORS Settings - Staging (More permissive)
CORS_ORIGINS=http://localhost:3000,https://staging.yourdomain.com
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=1800

# Email Configuration (Test environment)
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USE_TLS=true
# SMTP_USER and SMTP_PASSWORD should be set as environment variables
EMAIL_FROM=noreply@staging.yourdomain.com
EMAIL_ADMIN=admin@staging.yourdomain.com

# Analytics Configuration
ENABLE_ANALYTICS=true
ANALYTICS_BATCH_SIZE=100
ANALYTICS_FLUSH_INTERVAL=60
ANALYTICS_RETENTION_DAYS=30

# Korean NLP Settings
KONLPY_BACKEND=mecab
KOREAN_STOPWORDS_PATH=/app/data/korean_stopwords.txt
NLP_CACHE_SIZE=500
NLP_WORKERS=2

# Content Generation Settings
DEFAULT_PARAGRAPH_COUNT=5
DEFAULT_ARTICLE_COUNT=3
DEFAULT_DIFFICULTY=medium
MAX_GENERATION_BATCH=50
GENERATION_TIMEOUT_SECONDS=300
GENERATION_WORKERS=2

# Grading Configuration
DEFAULT_SIMILARITY_THRESHOLD=0.68
REQUIRE_POS_CHECK=true
REQUIRED_POS_TAGS=NOUN,VERB
GRADING_TIMEOUT_SECONDS=60

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=1440
JWT_REFRESH_EXPIRATION_DAYS=7

# Rate Limiting
RATE_LIMIT_STORAGE_URL=redis://redis:6379/1
RATE_LIMIT_DEFAULT=2000 per hour
RATE_LIMIT_LOGIN=20 per minute
RATE_LIMIT_API=10000 per hour

# Feature Flags
USE_EMBEDDINGS=true
ENABLE_CACHING=true
ENABLE_COMPRESSION=false
ENABLE_CDN=false
ENABLE_BACKGROUND_TASKS=true